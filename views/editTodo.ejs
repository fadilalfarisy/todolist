<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous">
    </script>
    <title>Edit Todo</title>
</head>

<body>

    <div class="container" style="width: 400px; margin-top: 100px; margin-bottom: 100px;">

        <h2 class="text-center">Edit Todo</h2>

        <!-- input todo -->
        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label">Todo</label>
            <input type="text" class="form-control" name="todo" id="exampleFormControlInput1" form="form-save"
                value="<%=getTodo.todo%>">
        </div>
        <!-- input description -->
        <div class="mb-3">
            <label for="exampleFormControlTextarea1" class="form-label">Description</label>
            <textarea class="form-control" name="description" id="exampleFormControlTextarea1" form="form-save"
                rows="3"><%=getTodo.description%></textarea>
        </div>

        <!-- check image is exist -->
        <% if(getTodo.image.data !="" ) {%>
        <img src="data:image/<%=getTodo.image.contentType%>;base64,<%=getTodo.image.data.toString('base64')%>"
            class="card-img-top" alt="...">

        <!-- form delete image -->
        <form action="/todo/image/<%=getTodo._id%>" method="get">
            <button type="submit" style="width: 400px; margin-bottom: 10px;" class="btn btn-danger">Delete
                Image</button>
        </form>
        <% } %>

        <div class=" mb-3">

            <!-- check iamge is exist -->
            <% if(getTodo.image.data !="" ) {%>
            <label for="formFile" class="form-label">Change Image</label>
            <% } else {%>
            <label for="formFile" class="form-label">Upload Image</label>
            <% } %>

            <!-- upload image -->
            <input class="form-control" type="file" name="image" form="form-save" id="formFile">
        </div>

        <div class="text-end">
            <!-- button cancel -->
            <form id="form-cancel" style="display:inline;" action="/todo" method="get">
                <button type="submit" class="btn btn-danger">cancel</button>
            </form>
            <!-- button save edited todo -->
            <form id="form-save" style="display:inline;" action="/todo/edit/<%=getTodo._id%>" method="post"
                enctype="multipart/form-data">
                <input type="hidden" name="" id="">
                <button type="submit" class="btn btn-primary">save</button>
            </form>
        </div>

    </div>

</body>

</html>